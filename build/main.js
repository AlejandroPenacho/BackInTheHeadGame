(()=>{"use strict";var t={735:(t,e,o)=>{function i(){}function n(t){return t()}function s(){return Object.create(null)}function r(t){t.forEach(n)}function a(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function h(t){return 0===Object.keys(t).length}function c(t,e){t.appendChild(e)}function d(t,e,o){t.insertBefore(e,o||null)}function p(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function y(){return u(" ")}function g(t,e,o){null==o?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o)}function m(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e,o,i){t.style.setProperty(e,o,i?"important":"")}let $;function b(t){$=t}o.r(e),o.d(e,{default:()=>at}),new Set,new Set;const k=[],x=[],w=[],z=[],M=Promise.resolve();let P=!1;function _(t){w.push(t)}let S=!1;const C=new Set;function I(){if(!S){S=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];b(e),j(e.$$)}for(b(null),k.length=0;x.length;)x.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];C.has(e)||(C.add(e),e())}w.length=0}while(k.length);for(;z.length;)z.pop()();P=!1,S=!1,C.clear()}}function j(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const F=new Set;let L;function E(t,e){t&&t.i&&(F.delete(t),t.i(e))}function T(t,e,o,i){if(t&&t.o){if(F.has(t))return;F.add(t),L.c.push((()=>{F.delete(t),i&&(o&&t.d(1),i())})),t.o(e)}}const B="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;let A;function O(t){t&&t.c()}function q(t,e,o,i){const{fragment:s,on_mount:l,on_destroy:h,after_update:c}=t.$$;s&&s.m(e,o),i||_((()=>{const e=l.map(n).filter(a);h?h.push(...e):r(e),t.$$.on_mount=[]})),c.forEach(_)}function R(t,e){const o=t.$$;null!==o.fragment&&(r(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}function H(t,e,o,n,a,l,h=[-1]){const c=$;b(t);const d=t.$$={fragment:null,ctx:null,props:l,update:i,not_equal:a,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:e.context||[]),callbacks:s(),dirty:h,skip_bound:!1};let f=!1;if(d.ctx=o?o(t,e.props||{},((e,o,...i)=>{const n=i.length?i[0]:o;return d.ctx&&a(d.ctx[e],d.ctx[e]=n)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](n),f&&function(t,e){-1===t.$$.dirty[0]&&(k.push(t),P||(P=!0,M.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),o})):[],d.update(),f=!0,r(d.before_update),d.fragment=!!n&&n(d.ctx),e.target){if(e.hydrate){const t=(u=e.target,Array.from(u.childNodes));d.fragment&&d.fragment.l(t),t.forEach(p)}else d.fragment&&d.fragment.c();e.intro&&E(t.$$.fragment),q(t,e.target,e.anchor,e.customElement),I()}var u;b(c)}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(A=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(n).filter(a);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,o){this[t]=o}disconnectedCallback(){r(this.$$.on_disconnect)}$destroy(){R(this,1),this.$destroy=i}$on(t,e){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(e),()=>{const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}$set(t){this.$$set&&!h(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class K{$destroy(){R(this,1),this.$destroy=i}$on(t,e){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(e),()=>{const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}$set(t){this.$$set&&!h(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function G(t){let e;return{c(){e=f("div"),v(e,"height","30px"),v(e,"width",t[0].foot.length+"px"),v(e,"transform","translate("+t[1][0]+"px, "+t[1][1]+"px)  translate(-50%,-50%) rotate("+t[1][2]+"deg)"),g(e,"class","svelte-9lir44")},m(t,o){d(t,e,o)},p(t,[o]){1&o&&v(e,"width",t[0].foot.length+"px"),2&o&&v(e,"transform","translate("+t[1][0]+"px, "+t[1][1]+"px)  translate(-50%,-50%) rotate("+t[1][2]+"deg)")},i,o:i,d(t){t&&p(e)}}}function N(t,e,o){let i,{player:n}=e;return t.$$set=t=>{"player"in t&&o(0,n=t.player)},t.$$.update=()=>{1&t.$$.dirty&&o(1,i=n.getFootPosition())},[n,i]}const J=class extends K{constructor(t){var e;super(),document.getElementById("svelte-9lir44-style")||((e=f("style")).id="svelte-9lir44-style",e.textContent="div.svelte-9lir44{background-color:darkgoldenrod;position:absolute;border-radius:15px}",c(document.head,e)),H(this,t,N,G,l,{player:0})}};function D(t){let e,o,i,n,s;return n=new J({props:{player:t[0]}}),{c(){e=f("div"),i=y(),O(n.$$.fragment),g(e,"style",o="transform: translate("+t[0].position[0]+"px, "+t[0].position[1]+"px) translate(-50%, -50%);\n            height: "+t[0].size+"px;\n            width: "+t[0].size+"px;\n            border-radius : "+t[0].size/2+"px;\n            background-color : "+t[0].color),g(e,"class","svelte-1ybaz7a")},m(t,o){d(t,e,o),d(t,i,o),q(n,t,o),s=!0},p(t,[i]){(!s||1&i&&o!==(o="transform: translate("+t[0].position[0]+"px, "+t[0].position[1]+"px) translate(-50%, -50%);\n            height: "+t[0].size+"px;\n            width: "+t[0].size+"px;\n            border-radius : "+t[0].size/2+"px;\n            background-color : "+t[0].color))&&g(e,"style",o);const r={};1&i&&(r.player=t[0]),n.$set(r)},i(t){s||(E(n.$$.fragment,t),s=!0)},o(t){T(n.$$.fragment,t),s=!1},d(t){t&&p(e),t&&p(i),R(n,t)}}}function U(t,e,o){let{player:i}=e;return t.$$set=t=>{"player"in t&&o(0,i=t.player)},[i]}const Q=class extends K{constructor(t){var e;super(),document.getElementById("svelte-1ybaz7a-style")||((e=f("style")).id="svelte-1ybaz7a-style",e.textContent="div.svelte-1ybaz7a{position:absolute;border-radius:25px}",c(document.head,e)),H(this,t,U,D,l,{player:0})}};function V(t){let e;return{c(){e=f("div"),v(e,"height",t[0].size),v(e,"width",t[0].size),v(e,"border-radius",t[0].size/2),v(e,"transform","translate("+t[0].position[0]+"px, "+t[0].position[1]+"px) translate(-50%, -50%)"),g(e,"class","svelte-18ikybg")},m(t,o){d(t,e,o)},p(t,[o]){1&o&&v(e,"height",t[0].size),1&o&&v(e,"width",t[0].size),1&o&&v(e,"border-radius",t[0].size/2),1&o&&v(e,"transform","translate("+t[0].position[0]+"px, "+t[0].position[1]+"px) translate(-50%, -50%)")},i,o:i,d(t){t&&p(e)}}}function W(t,e,o){let{data:i}=e;return t.$$set=t=>{"data"in t&&o(0,i=t.data)},[i]}const X=class extends K{constructor(t){var e;super(),document.getElementById("svelte-18ikybg-style")||((e=f("style")).id="svelte-18ikybg-style",e.textContent="div.svelte-18ikybg{height:60px;width:60px;position:absolute;border-radius:30px;background-color:palevioletred}",c(document.head,e)),H(this,t,W,V,l,{data:0})}};function Y(t){let e;return{c(){e=f("div"),v(e,"height","200px"),v(e,"width","20px"),v(e,"transform","translate("+t[0]+"px, 400px)"),g(e,"class","svelte-aojmvv")},m(t,o){d(t,e,o)},p(t,[o]){1&o&&v(e,"transform","translate("+t[0]+"px, 400px)")},i,o:i,d(t){t&&p(e)}}}function Z(t,e,o){let i,{side:n}=e;return"left"==n?i=0:"right"==n&&(i=980),t.$$set=t=>{"side"in t&&o(1,n=t.side)},[i,n]}const tt=class extends K{constructor(t){var e;super(),document.getElementById("svelte-aojmvv-style")||((e=f("style")).id="svelte-aojmvv-style",e.textContent="div.svelte-aojmvv{background-color:greenyellow;position:absolute}",c(document.head,e)),H(this,t,Z,Y,l,{side:1})}};var et=o(768);const{document:ot}=B;function it(t,e,o){const i=t.slice();return i[11]=e[o],i}function nt(t){let e,o;return e=new Q({props:{player:t[11]}}),{c(){O(e.$$.fragment)},m(t,i){q(e,t,i),o=!0},p(t,o){const i={};1&o&&(i.player=t[11]),e.$set(i)},i(t){o||(E(e.$$.fragment,t),o=!0)},o(t){T(e.$$.fragment,t),o=!1},d(t){R(e,t)}}}function st(t){let e,o,i,n,s,a,l,h,v,$,b,k,x,w,z,M,P=t[2][0]+"",_=t[2][1]+"";o=new tt({props:{side:"right"}}),n=new tt({props:{side:"left"}});let S=t[0],C=[];for(let e=0;e<S.length;e+=1)C[e]=nt(it(t,S,e));const I=t=>T(C[t],1,1,(()=>{C[t]=null}));return x=new X({props:{data:t[1]}}),{c(){e=f("div"),O(o.$$.fragment),i=y(),O(n.$$.fragment),s=y(),a=f("div"),l=f("p"),h=u(P),v=u("-"),$=u(_),b=y();for(let t=0;t<C.length;t+=1)C[t].c();k=y(),O(x.$$.fragment),w=y(),z=f("div"),z.innerHTML='<div class="controlBlock svelte-6z7mck"><h5>Left player</h5> \n        <p>Left : Z</p> \n        <p>Right: C</p> \n        <p>Jump: S</p> \n        <p>Kick: B</p></div> \n    <div class="controlBlock svelte-6z7mck"><h5>Right player</h5> \n        <p>Left : left arrow</p> \n        <p>Right: right arrow</p> \n        <p>Jump: up arrow</p> \n        <p>Kick: L</p></div>',g(a,"class","score svelte-6z7mck"),g(e,"class","mainScene svelte-6z7mck"),g(z,"class","control svelte-6z7mck")},m(t,r){d(t,e,r),q(o,e,null),c(e,i),q(n,e,null),c(e,s),c(e,a),c(a,l),c(l,h),c(l,v),c(l,$),c(e,b);for(let t=0;t<C.length;t+=1)C[t].m(e,null);c(e,k),q(x,e,null),d(t,w,r),d(t,z,r),M=!0},p(t,[o]){if((!M||4&o)&&P!==(P=t[2][0]+"")&&m(h,P),(!M||4&o)&&_!==(_=t[2][1]+"")&&m($,_),1&o){let i;for(S=t[0],i=0;i<S.length;i+=1){const n=it(t,S,i);C[i]?(C[i].p(n,o),E(C[i],1)):(C[i]=nt(n),C[i].c(),E(C[i],1),C[i].m(e,k))}for(L={r:0,c:[],p:L},i=S.length;i<C.length;i+=1)I(i);L.r||r(L.c),L=L.p}const i={};2&o&&(i.data=t[1]),x.$set(i)},i(t){if(!M){E(o.$$.fragment,t),E(n.$$.fragment,t);for(let t=0;t<S.length;t+=1)E(C[t]);E(x.$$.fragment,t),M=!0}},o(t){T(o.$$.fragment,t),T(n.$$.fragment,t),C=C.filter(Boolean);for(let t=0;t<C.length;t+=1)T(C[t]);T(x.$$.fragment,t),M=!1},d(t){t&&p(e),R(o),R(n),function(t,e){for(let o=0;o<t.length;o+=1)t[o]&&t[o].d(e)}(C,t),R(x),t&&p(w),t&&p(z)}}}function rt(t,e,o){let i,n,s=new et.qR,r={},a=[new et.zk(et.MF.left),new et.zk(et.MF.right)],l=new et.af,h=[0,0];return document.onkeydown=function(t){if(!t.repeat){n=t.key,"F12"!==n&&"F5"!==n&&t.preventDefault(),r[n]=!0;for(let t=0;t<s.nPlayers;t++)a[t].checkPressedKeys(r)}},document.onkeyup=function(t){let e=t.key;r[e]=!1;for(let t=0;t<s.nPlayers;t++)a[t].checkPressedKeys(r)},l=l,requestAnimationFrame((function t(e){i||(i=e);let n=(e-i)/1e3;i=e;for(let t=0;t<s.nPlayers;t++){let e=a[t];e.integrateTime(n,s.gravity),e.position[0]=Math.min(Math.max(e.position[0],e.size/2),s.scenarioSize[0]-e.size/2),e.position[1]>=s.scenarioSize[1]-e.size/2&&e.velocity[1]>0&&(e.velocity[1]=0,e.position[1]=s.scenarioSize[1]-e.size/2,e.touchingGround=!0)}o(0,a),l.integrateTime(n,s.gravity),l.position[0]>s.scenarioSize[0]-l.size/2&&l.velocity[0]>0&&(l.position[1]>400&&o(2,h=[h[0]+1,h[1]]),o(1,l.velocity[0]*=-1,l)),l.position[0]<l.size/2&&l.velocity[0]<0&&(l.position[1]>400&&o(2,h=[h[0],h[1]+1]),o(1,l.velocity[0]*=-1,l)),l.position[1]>s.scenarioSize[1]-l.size/2&&l.velocity[1]>0&&(o(1,l.velocity[1]*=-.8,l),o(1,l.position[1]=s.scenarioSize[1]-l.size/2,l)),l.position[1]<l.size/2&&l.velocity[1]<0&&o(1,l.velocity[1]*=-1,l),function(){for(let t=0;t<s.nPlayers;t++)a[t].computeCollision(l)}(),o(1,l),requestAnimationFrame(t)})),[a,l,h]}const at=class extends K{constructor(t){var e;super(),ot.getElementById("svelte-6z7mck-style")||((e=f("style")).id="svelte-6z7mck-style",e.textContent="div.mainScene.svelte-6z7mck{background-color:darkblue;width:1000px;height:600px;margin:auto;-moz-user-select:none;-webkit-user-select:none;cursor:pointer;position:relative}div.score.svelte-6z7mck{width:100%;margin:auto;display:flex;font-size:80px;color:white;position:absolute;justify-content:center}div.control.svelte-6z7mck{display:flex;justify-content:space-between;margin:auto;width:1000px}div.controlBlock.svelte-6z7mck{background-color:khaki;padding:20px}",c(ot.head,e)),H(this,t,rt,st,l,{})}}},768:(t,e)=>{var o;e.zk=e.af=e.qR=e.MF=void 0,function(t){t[t.left=0]="left",t[t.right=1]="right"}(o=e.MF||(e.MF={}));var i="orange",n=[200,500],s={jump:"s",left:"z",right:"c",kick:"b"},r="cyan",a=[800,500],l={jump:"ArrowUp",left:"ArrowLeft",right:"ArrowRight",kick:"l"};function h(t,e){return[t[0]*Math.cos(e*Math.PI/180)-t[1]*Math.sin(e*Math.PI/180),t[0]*Math.sin(e*Math.PI/180)+t[1]*Math.cos(e*Math.PI/180)]}e.qR=function(){this.scenarioSize=[1e3,600],this.gravity=900,this.nPlayers=2};var c=function(){function t(){this.position=[400,400],this.velocity=[100,-100],this.size=60,this.dragCoefficient=3e-5}return t.prototype.integrateTime=function(t,e){this.position[0]+=this.velocity[0]*t,this.position[1]+=this.velocity[1]*t,this.velocity[1]+=e*t,this.velocity[0]-=this.dragCoefficient*this.velocity[0]*Math.abs(this.velocity[0]),this.velocity[1]-=this.dragCoefficient*this.velocity[1]*Math.abs(this.velocity[1])},t}();e.af=c;var d=function(){function t(t){t===o.left?(this.position=n,this.keybinding=s,this.color=i):(this.position=a,this.keybinding=l,this.color=r),this.side=t,this.velocity=[0,0],this.touchingGround=!1,this.size=100,this.maxSpeed=200,this.jumpSpeed=600,this.foot=new p(t)}return t.prototype.getFootPosition=function(){var t,e;this.side===o.left?(t=this.foot.theta-this.foot.alpha,e=this.foot.theta):(t=-this.foot.theta+this.foot.alpha+180,e=-this.foot.theta);var i=this.position,n=[(this.size/2-this.foot.width/2)*Math.sin(e*Math.PI/180),(this.size/2-this.foot.width/2)*Math.cos(e*Math.PI/180)],s=[(this.foot.length/2-this.foot.width/2)*Math.cos(t*Math.PI/180),-(this.foot.length/2-this.foot.width/2)*Math.sin(t*Math.PI/180)];return[i[0]+n[0]+s[0],i[1]+n[1]+s[1],-t]},t.prototype.computeCollision=function(t){this.computeHeadCollision(t),this.computeFootCollision(t)},t.prototype.computeHeadCollision=function(t){var e=t.position[0]-this.position[0],o=t.position[1]-this.position[1],i=t.velocity[0]-this.velocity[0],n=t.velocity[1]-this.velocity[1],s=[e,o],r=Math.pow(Math.pow(e,2)+Math.pow(o,2),.5),a=(i*s[0]+n*s[1])/r;r<=this.size/2+t.size/2&&a<0&&(t.velocity[0]-=2*a*s[0]/r,t.velocity[1]-=2*a*s[1]/r)},t.prototype.computeFootCollision=function(t){var e=this.getFootPosition(),o=e[0],i=e[1],n=e[2];n=-n;var s,r=[t.position[0]-o,t.position[1]-i],a=h(r,n),l=h(t.velocity,n),c=h(this.velocity,n);if(a[0]<=this.foot.rectLength/2&&a[0]>=-this.foot.rectLength/2){if(a[1]<=this.foot.width/2+t.size/2&&a[1]>=0)s=[0,1];else{if(!(a[1]>=-(this.foot.width/2+t.size/2)&&a[1]<=0))return;s=[0,-1]}var d=[(this.size/2-this.foot.width/2)*Math.sin(this.foot.alpha)+a[0],(this.size/2-this.foot.width/2)*Math.cos(this.foot.alpha)+a[1]*s[1]],p=(this.foot.thetadot,c[0],(-d[0]*this.foot.thetadot+c[1])*s[1]-l[1]*s[1]);if(p>0){var f=2*p,u=h(s,-n);t.velocity[0]+=f*u[0],t.velocity[1]+=f*u[1]}}else{var y;if(Math.pow(a[0]-this.foot.rectLength/2,2)+Math.pow(a[1],2)<=Math.pow(this.foot.width/2+t.size/2,2))y=[this.foot.rectLength/2,0];else{if(!(Math.pow(a[0]+this.foot.rectLength/2,2)+Math.pow(a[1],2)<=Math.pow(this.foot.width/2+t.size/2,2)))return;y=[-this.foot.rectLength/2,0]}var g=h(y,-n);g=[g[0]+o,g[1]+i],r=[t.position[0]-g[0],t.position[1]-g[1]];var m=[this.foot.thetadot*(g[1]-this.position[1])+this.velocity[0],-this.foot.thetadot*(g[0]-this.position[0])+this.velocity[1]],v=Math.pow(Math.pow(r[0],2)+Math.pow(r[1],2),.5),$=[r[0]/v,r[1]/v],b=[t.velocity[0]-m[0],t.velocity[1]-m[1]],k=b[0]*$[0]+b[1]*$[1];k<0&&(t.velocity[0]-=2*k*$[0],t.velocity[1]-=2*k*$[1])}},t.prototype.checkPressedKeys=function(t){t[this.keybinding.right]&&(this.velocity[0]=this.maxSpeed),t[this.keybinding.left]&&(this.velocity[0]=-this.maxSpeed),t[this.keybinding.right]||t[this.keybinding.left]||(this.velocity[0]=0),t[this.keybinding.jump]&&this.touchingGround&&(this.velocity[1]=-this.jumpSpeed,this.touchingGround=!1),t[this.keybinding.kick]&&this.foot.theta<90&&(this.foot.theta=Math.min(this.foot.theta,90),this.side==o.left?this.foot.thetadot=2*Math.PI:this.foot.thetadot=-2*Math.PI),!t[this.keybinding.kick]&&this.foot.theta>0&&(this.foot.theta=Math.max(this.foot.theta,0),this.side==o.left?this.foot.thetadot=-4*Math.PI:this.foot.thetadot=4*Math.PI),(!t[this.keybinding.kick]&&0===this.foot.theta||t[this.keybinding.kick]&&90===this.foot.theta)&&(this.foot.thetadot=0)},t.prototype.integrateTime=function(t,e){this.position[0]+=this.velocity[0]*t,this.position[1]+=this.velocity[1]*t,this.side==o.left?this.foot.theta+=180*this.foot.thetadot/Math.PI*t:this.foot.theta-=180*this.foot.thetadot/Math.PI*t,this.foot.theta=Math.min(Math.max(this.foot.theta,0),90),this.velocity[1]+=e*t},t}();e.zk=d;var p=function(t){this.theta=0,this.thetadot=0,this.alpha=15,this.length=90,this.width=30,this.rectLength=this.length-this.width}}},e={};function o(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,o),s.exports}o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},new(o(735).default)({target:document.body,props:{name:"world"}})})();
